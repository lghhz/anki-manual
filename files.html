<!DOCTYPE HTML>
<html lang="zh-tw" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Managing Files - Anki 使用手冊</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Anki 使用手冊。Anki 是一個閃卡程式，是你學習時的好幫手。">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="css/kbd.css">
        <link rel="stylesheet" href="css/misc.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="intro.html">介紹 Introduction</a></li><li class="chapter-item "><a href="background.html"><strong aria-hidden="true">1.</strong> Background</a></li><li class="chapter-item "><a href="platform/intro.html"><strong aria-hidden="true">2.</strong> 平台說明 Platform Notes</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="platform/windows/intro.html"><strong aria-hidden="true">2.1.</strong> Windows</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="platform/windows/installing.html"><strong aria-hidden="true">2.1.1.</strong> Install & Upgrade</a></li><li class="chapter-item "><a href="platform/windows/installation-issues.html"><strong aria-hidden="true">2.1.2.</strong> Installation Issues</a></li><li class="chapter-item "><a href="platform/windows/startup-issues.html"><strong aria-hidden="true">2.1.3.</strong> Startup Issues</a></li><li class="chapter-item "><a href="platform/windows/display-issues.html"><strong aria-hidden="true">2.1.4.</strong> Display Issues</a></li><li class="chapter-item "><a href="platform/windows/copy-and-paste.html"><strong aria-hidden="true">2.1.5.</strong> 複製/貼上發生問題 Copy and Paste Issues</a></li><li class="chapter-item "><a href="platform/windows/text-size.html"><strong aria-hidden="true">2.1.6.</strong> Text Size</a></li><li class="chapter-item "><a href="platform/windows/permission-problems.html"><strong aria-hidden="true">2.1.7.</strong> Permission Problems</a></li></ol></li><li class="chapter-item "><a href="platform/mac/intro.html"><strong aria-hidden="true">2.2.</strong> macOS</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="platform/mac/installing.html"><strong aria-hidden="true">2.2.1.</strong> Install & Upgrade</a></li><li class="chapter-item "><a href="platform/mac/display-issues.html"><strong aria-hidden="true">2.2.2.</strong> Display Issues</a></li></ol></li><li class="chapter-item "><a href="platform/linux/intro.html"><strong aria-hidden="true">2.3.</strong> Linux</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="platform/linux/installing.html"><strong aria-hidden="true">2.3.1.</strong> Install & Upgrade</a></li><li class="chapter-item "><a href="platform/linux/missing-libraries.html"><strong aria-hidden="true">2.3.2.</strong> Missing Libraries</a></li><li class="chapter-item "><a href="platform/linux/display-issues.html"><strong aria-hidden="true">2.3.3.</strong> Display Issues</a></li><li class="chapter-item "><a href="platform/linux/blank-window.html"><strong aria-hidden="true">2.3.4.</strong> Blank Main Window</a></li><li class="chapter-item "><a href="platform/linux/distro-packages.html"><strong aria-hidden="true">2.3.5.</strong> Linux Distro Packages</a></li><li class="chapter-item "><a href="platform/linux/gtk-theme.html"><strong aria-hidden="true">2.3.6.</strong> Incorrect GTK Theme</a></li><li class="chapter-item "><a href="platform/linux/wayland.html"><strong aria-hidden="true">2.3.7.</strong> Wayland</a></li><li class="chapter-item "><a href="platform/linux/input-methods.html"><strong aria-hidden="true">2.3.8.</strong> Input Methods</a></li></ol></li></ol></li><li class="chapter-item "><a href="getting-started.html"><strong aria-hidden="true">3.</strong> 新手入門 Getting Started</a></li><li class="chapter-item "><a href="getting-help.html"><strong aria-hidden="true">4.</strong> 取得協助 Getting Help</a></li><li class="chapter-item "><a href="studying.html"><strong aria-hidden="true">5.</strong> 學習 Studying</a></li><li class="chapter-item "><a href="editing.html"><strong aria-hidden="true">6.</strong> 新增/編輯 Adding/Editing</a></li><li class="chapter-item "><a href="templates/intro.html"><strong aria-hidden="true">7.</strong> 卡片模板 Card Templates</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="templates/fields.html"><strong aria-hidden="true">7.1.</strong> 欄位取代 Field Replacements</a></li><li class="chapter-item "><a href="templates/generation.html"><strong aria-hidden="true">7.2.</strong> 產生卡片 Card Generation</a></li><li class="chapter-item "><a href="templates/styling.html"><strong aria-hidden="true">7.3.</strong> 樣式與 HTML Styling & HTML</a></li><li class="chapter-item "><a href="templates/errors.html"><strong aria-hidden="true">7.4.</strong> Checks and Errors</a></li></ol></li><li class="chapter-item "><a href="preferences.html"><strong aria-hidden="true">8.</strong> Preferences</a></li><li class="chapter-item "><a href="deck-options.html"><strong aria-hidden="true">9.</strong> Deck Options</a></li><li class="chapter-item "><a href="syncing.html"><strong aria-hidden="true">10.</strong> Syncing with AnkiWeb</a></li><li class="chapter-item "><a href="profiles.html"><strong aria-hidden="true">11.</strong> 設定檔 Profiles</a></li><li class="chapter-item "><a href="browsing.html"><strong aria-hidden="true">12.</strong> Browsing</a></li><li class="chapter-item "><a href="filtered-decks.html"><strong aria-hidden="true">13.</strong> Filtered Decks</a></li><li class="chapter-item "><a href="searching.html"><strong aria-hidden="true">14.</strong> Searching</a></li><li class="chapter-item "><a href="importing/intro.html"><strong aria-hidden="true">15.</strong> Importing</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="importing/text-files.html"><strong aria-hidden="true">15.1.</strong> Text Files</a></li><li class="chapter-item "><a href="importing/packaged-decks.html"><strong aria-hidden="true">15.2.</strong> Packaged Decks</a></li></ol></li><li class="chapter-item "><a href="exporting.html"><strong aria-hidden="true">16.</strong> Exporting</a></li><li class="chapter-item "><a href="backups.html"><strong aria-hidden="true">17.</strong> Backups</a></li><li class="chapter-item expanded "><a href="files.html" class="active"><strong aria-hidden="true">18.</strong> Managing Files</a></li><li class="chapter-item "><a href="stats.html"><strong aria-hidden="true">19.</strong> Statistics</a></li><li class="chapter-item "><a href="media.html"><strong aria-hidden="true">20.</strong> Media</a></li><li class="chapter-item "><a href="math.html"><strong aria-hidden="true">21.</strong> Math & Symbols</a></li><li class="chapter-item "><a href="leeches.html"><strong aria-hidden="true">22.</strong> Leeches</a></li><li class="chapter-item "><a href="addons.html"><strong aria-hidden="true">23.</strong> 附加元件 Add-ons</a></li><li class="chapter-item "><a href="troubleshooting.html"><strong aria-hidden="true">24.</strong> Troubleshooting</a></li><li class="chapter-item "><a href="sync-server.html"><strong aria-hidden="true">25.</strong> Sync Server</a></li><li class="chapter-item "><a href="misc.html"><strong aria-hidden="true">26.</strong> Miscellaneous</a></li><li class="chapter-item "><a href="glossary.html"><strong aria-hidden="true">27.</strong> 詞彙對照表 Glossary</a></li><li class="chapter-item affix "><a href="contrib.html">Contributing</a></li><li class="chapter-item affix "><a href="faqs.html">常見問題 FAQs</a></li><li class="chapter-item affix "><a href="resources.html">Resources</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Anki 使用手冊</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/anki-manual-zh-tw/anki-manual/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="管理檔案與集合-managing-files-and-your-collection-英文"><a class="header" href="#管理檔案與集合-managing-files-and-your-collection-英文">管理檔案與集合 <a href="https://docs.ankiweb.net/files.html">Managing Files and Your Collection <span style="font-size:18px;">(英文)</span></a></a></h1>
<ul>
<li><a href="#%E6%AA%A2%E6%9F%A5%E9%9B%86%E5%90%88-checking-your-collection">檢查集合 Checking Your Collection</a></li>
<li><a href="#%E6%AA%94%E6%A1%88%E4%BD%8D%E7%BD%AE-file-locations">檔案位置 File Locations</a></li>
<li><a href="#%E5%95%9F%E5%8B%95%E9%81%B8%E9%A0%85-startup-options">啟動選項 Startup Options</a></li>
<li><a href="#%E6%AA%94%E6%A1%88%E5%90%8C%E6%AD%A5-file-syncing">檔案同步 File Syncing</a></li>
<li><a href="#%E7%B6%B2%E8%B7%AF%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1-network-filesystems">網路檔案系統 Network Filesystems</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E9%9A%A8%E8%BA%AB%E7%A2%9F%E5%9F%B7%E8%A1%8C-running-from-a-flash-drive">使用隨身碟執行 Running from a Flash Drive</a></li>
<li><a href="#%E5%82%99%E4%BB%BD-backups">備份 Backups</a></li>
<li><a href="#%E7%84%A1%E6%B3%95%E5%AD%98%E5%8F%96%E7%A1%AC%E7%A2%9F-inaccessible-harddisk">無法存取硬碟 Inaccessible Harddisk</a></li>
<li><a href="#%E6%9A%AB%E5%AD%98%E8%B3%87%E6%96%99%E5%A4%BE%E6%AC%8A%E9%99%90-permissions-of-temp-folder">暫存資料夾權限 Permissions of Temp Folder</a></li>
<li><a href="#%E9%9B%86%E5%90%88%E6%90%8D%E6%AF%80-corrupt-collections">集合損毀 Corrupt Collections</a>
<ul>
<li><a href="#linuxmacos">Linux/macOS</a></li>
<li><a href="#windows">Windows</a></li>
<li><a href="#final-step">Final Step</a></li>
</ul>
</li>
</ul>
<h2 id="檢查集合-checking-your-collection"><a class="header" href="#檢查集合-checking-your-collection">檢查集合 Checking Your Collection</a></h2>
<p>你可以定期使用工具選單中的「檢查資料庫」功能來檢查集合檔，防止檔案損毀、重建部分內部架構以及最佳化檔案。</p>
<p>在 Anki 中刪除牌組或卡片時，標籤不會自動刪除。使用「檢查資料庫」時，你的標籤清單也會被重建，清理不再被使用的標籤。</p>
<p>Anki 每兩週會自動最佳化你的集合來改善效能。但自動最佳化不會檢查錯誤或重建標籤清單。</p>
<h2 id="檔案位置-file-locations"><a class="header" href="#檔案位置-file-locations">檔案位置 File Locations</a></h2>
<p><strong>Windows</strong>：較新版本的 Anki 檔案儲存在 <code>appdata</code> 資料夾中。你可以在檔案總管的網址列中輸入 <code>%APPDATA%\Anki2</code> 來打開。較舊版本的 Anki 檔案儲存在 <code>文件\Anki</code> 資料夾中。</p>
<p><strong>Mac</strong>：較新版本的 Anki 檔案儲存在 <code>~/Library/Application Support/Anki2</code> 資料夾中。<code>資源庫(Library)</code> 資料夾預設是隱藏的。要打開 <code>資源庫</code>，請在 Finder 按住 Option 鍵，然後選擇「前往」&gt;「資源庫」。較舊版本的 Anki 檔案儲存在 <code>文件/Anki</code> 資料夾中。</p>
<p><strong>Linux</strong>：較新版本的 Anki 檔案儲存在 <code>~/.local/share/Anki2</code> 資料夾中，若你設定了自訂資料路徑則會在 <code>$XDG_DATA_HOME/Anki2</code> 資料夾中。較舊版本的 Anki 檔案儲存在
<code>~/Documents/Anki</code> 或 <code>~/Anki</code>資料夾中。</p>
<p>在 Anki 資料夾裡，程式檔案與設定檔層級的偏好設定儲存在 <code>prefs.db</code> 檔案中。</p>
<p>每個設定檔都儲存在單獨的資料夾內。設定檔資料夾包含：</p>
<ul>
<li>
<p>筆記、牌組、卡片等，儲存在 <code>collection.anki2</code> 檔案中</p>
</li>
<li>
<p>音訊和影像，儲存在 <code>collection.media</code> 資料夾中</p>
</li>
<li>
<p>備份資料夾</p>
</li>
<li>
<p>系統檔案</p>
</li>
</ul>
<p>Anki 執行時，請勿修改、複製或移動檔案，否則可能會造成集合等檔案損毀。</p>
<h2 id="啟動選項-startup-options"><a class="header" href="#啟動選項-startup-options">啟動選項 Startup Options</a></h2>
<p>如果你一台電腦上的集合損毀了，但另一台電腦的集合完好，你可以在打開 Anki 時按住  <kbd>Shift</kbd> 鍵來略過自動同步，然後再使用單向同步（完整同步）選項。另外，按住 <kbd>Shift</kbd> 鍵還可以暫時停用附加元件，當附加元件出現錯誤時可以避免發生更多問題。</p>
<p>It is possible to specify a custom folder location during startup. This
is an advanced feature that is primarily intended to be used with
portable installations, and we recommend you use the default location in
most circumstances.</p>
<p>The syntax to specify an alternate folder is as follows:</p>
<pre><code>anki -b /path/to/anki/folder
</code></pre>
<ul>
<li>
<p>If you have multiple profiles, you can pass -p &lt;name&gt; to load
a specific profile.</p>
</li>
<li>
<p>If you pass -p some-fake-name, Anki will show the profile screen on startup.
If no profile is provided, the last-used profile is loaded.</p>
</li>
<li>
<p>To change the interface language, use -l &lt;iso 639-1 language
code&gt;, such as &quot;-l ja&quot; for Japanese.</p>
</li>
</ul>
<p>If you always want to use a custom folder location, you can modify your
shortcut to Anki. On Windows, right-click on the shortcut, choose
Properties, select the Shortcut tab, and add &quot;-b
\path\to\data\folder&quot; after the path to the program, which should
leave you with something like</p>
<pre><code>&quot;C:\Program Files\Anki\anki.exe&quot; -b &quot;C:\AnkiDataFolder&quot;
</code></pre>
<p>You can also use this technique with the -l option to easily use Anki in
different languages.</p>
<p>On Windows, you should use a backslash (\) not a forward slash (/).</p>
<p>On a Mac there is no easy way to alter the behaviour when clicking on
the Anki icon, but it is possible to start Anki with a custom base
folder from a terminal:</p>
<pre><code>open /Applications/Anki.app --args -b ~/myankifolder
</code></pre>
<p>Alternatively, you can define the environment variable &quot;ANKI_BASE&quot;.
On Windows, you can define the environment variable with:</p>
<pre><code>set &quot;ANKI_BASE=C:/path/to/AnkiDataFolder&quot;
</code></pre>
<p>On Linux and macOS, you can use:</p>
<pre><code>export ANKI_BASE=&quot;/path/to/AnkiDataFolder&quot;
</code></pre>
<h2 id="檔案同步-file-syncing"><a class="header" href="#檔案同步-file-syncing">檔案同步 File Syncing</a></h2>
<p>使用第三方同步服務來同步 Anki 資料夾可能會造成資料庫損毀。</p>
<p>如果僅需同步媒體檔，你可以將外部資料夾連結至媒體檔資料夾中。</p>
<p>若要使用第三方服務來同步集合檔，建議建立指令碼，在打開 Anki 時複製雲端檔案到本機資料夾，關閉時再複製回去。</p>
<h2 id="網路檔案系統-network-filesystems"><a class="header" href="#網路檔案系統-network-filesystems">網路檔案系統 Network Filesystems</a></h2>
<p>使用網路檔案系統可能會造成資料庫損毀。如果必須使用網路檔案系統，請定期使用「檢查資料庫」工具來檢查有無損毀。</p>
<h2 id="使用隨身碟執行-running-from-a-flash-drive"><a class="header" href="#使用隨身碟執行-running-from-a-flash-drive">使用隨身碟執行 Running from a Flash Drive</a></h2>
<p>在 Windows 上，你可以在隨身碟中安裝 Anki 為可攜式軟體。以下步驟假設你的隨身碟為 G 槽。</p>
<ul>
<li>
<p>複製 <code>\Program Files\Anki</code> 資料夾到隨身碟上，變成 <code>G:\Anki</code>。</p>
</li>
<li>
<p>建立一個文字檔，命名為 <code>G:\anki.bat</code>，內容為：</p>
<p><code>g:\anki\anki.exe -b g:\ankidata</code></p>
</li>
</ul>
<p>如果不想要看見開啟時的命令列視窗，請將內容改為：</p>
<pre><code>start /b g:\anki\anki.exe -b g:\ankidata
</code></pre>
<ul>
<li>按兩下 <code>anki.bat</code> 來啟動 Anki，使用者資料儲存於 <code>G:\ankidata</code>。</li>
</ul>
<p>不能去除磁碟機代號，輸入 <code>\anki\anki.exe</code> 時將無法同步。</p>
<p>FAT32 格式的隨身碟可能無法同步媒體檔。請將隨身碟格式化為 NTFS 以確保能正常同步。</p>
<h2 id="備份-backups"><a class="header" href="#備份-backups">備份 Backups</a></h2>
<p>請參閱〈<a href="./backups.html">備份</a>〉。</p>
<h2 id="無法存取硬碟-inaccessible-harddisk"><a class="header" href="#無法存取硬碟-inaccessible-harddisk">無法存取硬碟 Inaccessible Harddisk</a></h2>
<p>啟動時，如果 <a href="#file-locations">Anki 資料夾</a>無法寫入， Anki 將顯示一則訊息並自動關閉。如果不清楚如何修正存取權限，請求助電腦專家。</p>
<h2 id="暫存資料夾權限-permissions-of-temp-folder"><a class="header" href="#暫存資料夾權限-permissions-of-temp-folder">暫存資料夾權限 Permissions of Temp Folder</a></h2>
<p>Anki 使用系統暫存資料夾來暫時儲存檔案。如果這個資料夾的權限被某些軟體（如防毒軟體）更動，Anki 將無法正常運作。</p>
<p>If you're on a Windows 7 machine, the general steps to fix the problem
are listed below. As this is somewhat complicated, please ask someone
knowledgeable about Windows if you are not sure.</p>
<ol>
<li>
<p>Click on the start bar, and type in %temp% (including the percents),
then hit <kbd>Enter</kbd>.</p>
</li>
<li>
<p>Go up one folder, and locate the temp folder. Right click on it, and
choose Properties.</p>
</li>
<li>
<p>In the security tab, click on Advanced.</p>
</li>
<li>
<p>Click on the Owner tab. If you're not listed as the owner, click the
button to take ownership.</p>
</li>
<li>
<p>On the permissions tab, ensure that you have full control. On a
default W7 install the control will actually be inherited from
c:\users\your-username.</p>
</li>
</ol>
<h2 id="集合損毀-corrupt-collections"><a class="header" href="#集合損毀-corrupt-collections">集合損毀 Corrupt Collections</a></h2>
<p>Anki 使用的檔案格式通常不會在程式或電腦崩潰時受到太大的影響，但在少數情況下，集合還是有可能會損毀，比如檔案在 Anki 執行時被修改、檔案儲存在雲端硬碟或程式錯誤。</p>
<p>When you run Tools&gt;Check Database, you will receive a message if Anki
detects the file has been corrupted. <strong>The best way to recover from this
is to restore from the most recent <a href="#backups">automatic backup</a></strong>, but
if your backup is too old, then you can attempt to repair the corruption
instead.</p>
<p>On Linux, make sure sqlite3 is installed. On a Mac, it should be
installed already. On Windows, download
<a href="http://www.sqlite.org/sqlite-3_6_23.zip">http://www.sqlite.org/sqlite-3_6_23.zip</a>.</p>
<p>Next, create a backup of your collection.anki2 file, in case something
goes wrong with the steps below.</p>
<h3 id="linuxmacos"><a class="header" href="#linuxmacos">Linux/macOS</a></h3>
<p>Open a terminal, change to the folder your collection is located in, and
type:</p>
<pre><code>sqlite3 collection.anki2 .dump &gt; dump.txt
</code></pre>
<p>Open the resulting dump.txt file in a text editor, and look at the final
line. If it reads &quot;rollback;&quot;, change it to &quot;commit;&quot;</p>
<p>Then run the following in a terminal:</p>
<pre><code>cat dump.txt | sqlite3 temp.file
</code></pre>
<p>Make sure you use temp.file - do not put collection.anki2 on the right,
or you will blank out the file. When you're done, proceed to the final
step.</p>
<h3 id="windows"><a class="header" href="#windows">Windows</a></h3>
<p>Copy the <code>sqlite3.exe</code> program and your deck to your desktop. Then go to
<strong>Start&gt;Run</strong> and type in <code>cmd.exe</code>.</p>
<p>If you're on a recent Windows, the command prompt may not start on your
desktop. If you don't see desktop displayed in the command prompt, type
something like the following, replacing 'administrator' with your login
name.</p>
<pre><code>cd C:\Users\Administrator\Desktop
</code></pre>
<p>Then type:</p>
<pre><code>sqlite3 collection.anki2 .dump &gt; dump.txt
</code></pre>
<p>Open the resulting dump.txt file in a text editor, and look at the final
line. If it reads &quot;rollback;&quot;, change it to &quot;commit;&quot;</p>
<p>Then run the following in a terminal:</p>
<pre><code>type dump.txt | sqlite3 temp.file
</code></pre>
<p>Make sure you use temp.file - do not put collection.anki2 on the right,
or you will blank out the file. When you're done, proceed to the final
step.</p>
<h3 id="final-step"><a class="header" href="#final-step">Final Step</a></h3>
<p>Check that you didn't get an error message, and that temp.file is not
empty. The procedure optimizes the collection in the process, so it's
normal for the new file to be somewhat smaller than the old one.</p>
<p>When you've confirmed the file is not empty:</p>
<ul>
<li>
<p>rename the original collection.anki2 file to something else</p>
</li>
<li>
<p>rename temp.file to collection.anki2</p>
</li>
<li>
<p>move collection.anki2 back into your collection folder, overwriting
the old version</p>
</li>
<li>
<p>start Anki and go to Tools&gt;Check Database to make sure the
collection has been successfully restored.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="backups.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="stats.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="backups.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="stats.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
